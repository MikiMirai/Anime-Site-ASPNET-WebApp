@using ASPNET_WebApp.Infrastructure.Data
@model dynamic
@{
	ViewData["Title"] = "Anime Details";
}

<!-- Anime Section Begin -->
<section style="padding-top: 60px; padding-bottom: 100px;">
	<div class="container">
		<div class="anime__details__content">
			<div class="row">
				<div class="col-lg-3">
					@if (Model.Anime.Image != null)
					{
						<div class="anime__details__pic set-bg" data-setbg="@Model.Anime.Image">
							@*<div class="comment"><i class="fa fa-comments"></i> @Model.Anime.Reviews.Count()</div>*@
						</div>
					}
					else
					{
						<div class="anime__details__pic set-bg" data-setbg="~/img/default-150x150">
							<div class="comment"><i class="fa fa-comments"></i> @Model.Anime.Reviews.Count</div>
						</div>
					}
				</div>
				<div class="col-lg-9">
					<div class="anime__details__text">
						<div class="anime__details__title">
							<h3>@Model.Anime.Name</h3>
						</div>

						<p>
							@Model.Anime.Description
						</p>
						<div class="anime__details__widget">
							<div class="row">
								<div class="col-lg-6 col-md-6">
									<ul>
										<li><span>Studios:</span> @Model.Anime.Studios</li>
										<li><span>Studios:</span> @Model.Anime.Producers</li>
										<li><span>Date aired:</span> @Model.Anime.Aired</li>
										<li><span>Status:</span> @Model.Anime.Status</li>
									</ul>
								</div>
								<div class="col-lg-6 col-md-6">
									<ul>
										<li><span>Genre:</span> @Model.Anime.Genres </li>
										<li><span>Rating:</span> @Model.Anime.Score / @Model.Anime.ReviewsCount times</li>
										<li><span>Duration:</span> @Model.Anime.Duration</li>
										<li><span>Episodes:</span> @Model.Anime.Episodes episodes</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div>
			<div>
				<div class="anime__details__form">
					<div class="section-title">
						<h5>Your Review</h5>
					</div>
					<form id="createReview" enctype="multipart/form-data" method="post">
						<div class="form-group">
							<input value="@Model.Anime.Id" name="AnimeId" hidden class="form-control" />
						</div>
						<textarea value="@ViewBag.Description" name="Description" placeholder="Your Review Text" style="margin-bottom: 10px;"></textarea>
						<div class="section-title" style="margin-top: 10px; margin-bottom: 10px;">
							<h5>Your Rating</h5>
						</div>
						<label for="lang">Score</label>
						<select name="Score" id="lang" size="8">
							<option value="1">1</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5</option>
							<option value="6">6</option>
							<option value="7">7</option>
							<option value="8">8</option>
							<option value="9">9</option>
							<option value="10">10</option>
						</select>
						<input type="submit" value="Submit" />
					</form>
				</div>
				<div class="anime__details__review" style="margin-top: 80px;">
					<div class="section-title">
						<h5>Reviews</h5>
					</div>
					@foreach (var review in Model.Reviews)
					{
						<div class="anime__review__item">
							<div class="anime__review__item__text">
								<h6>@review.UserName <span>@review.Date</span> <span class="float-right text-white text-bold">Score: @review.Score</span></h6>
								<p>
									@review.Description
								</p>
								<p style="margin-top: 15px;">
									<a asp-area="" asp-action="ReviewComments" asp-controller="Comment" asp-route-id="@review.Id" class="btn btn-block btn-outline-info btn-xs">Comments: @review.CommentsCount</a>
								</p>
							</div>
						</div>
					}
				</div>
			</div>
		</div>
	</div>
</section>
<!-- Anime Section End -->
<!-- Js Plugins -->
<script src="~/js/jquery-3.3.1.min.js"></script>
<script src="~/js/bootstrap.min.js"></script>
<script src="~/js/player.js"></script>
<script src="~/js/mixitup.min.js"></script>
<script src="~/js/jquery.slicknav.js"></script>
<script src="~/js/owl.carousel.min.js"></script>
<script src="~/js/main.js"></script>
<script src="~/js/site.js"></script>
<script src="~/plugins/toastr/toastr.min.js"></script>
<partial name="_UserMessages" />

@section Scripts {
<partial name="_ValidationScriptsPartial" />
}